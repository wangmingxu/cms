angular.module("starter.directives",[]).directive("picUpload",function(){return{restrict:"EAC",require:"?ngModel",scope:{result:"=pic"},template:"<div class='upload_data'><div class='ipt_left'>上传资料</div><label for='upload_resource' class='browse_btn'>浏览</label><input type='file' name='name' value='' class='hide' id='upload_resource'></div>",link:function(e,l,a,t){l.bind("change",function(l){var a={};a.file=l.target.files[0];var r=new FileReader;r.onload=function(l){a.base64=l.target.result;var r=(e.result.length+1,a.file.name.replace(".png","").replace(".jpg","").replace(".gif",""));a.title=r,e.result.push(a),console.log(e.result),e.$apply(function(){t.$setViewValue(e.result)})},r.readAsDataURL(l.target.files[0])})}}});
angular.module("starter.directives",[]).directive("picUpload",function(){return{restrict:"EAC",require:"?ngModel",scope:{result:"=pic"},template:"<div class='upload_data'><div class='ipt_left'>上传资料</div><label for='upload_resource' class='browse_btn'>浏览</label><input type='file' name='name' value='' class='hide' id='upload_resource'></div>",link:function(e,l,t,a){l.bind("change",function(l){var t={};t.file=l.target.files[0];var r=new FileReader;r.onload=function(l){t.base64=l.target.result;var r=e.result.length+1,i="图片"+r;t.title=i,e.result.push(t),console.log(e.result),e.$apply(function(){a.$setViewValue(e.result)})},r.readAsDataURL(l.target.files[0])})}}});